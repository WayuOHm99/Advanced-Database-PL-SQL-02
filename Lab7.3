ยังไม่ชัว
DECLARE
    v_dept_id NUMBER := &department_id;
    v_emp_name VARCHAR2(100);
    v_salary NUMBER;
    
    CURSOR c_max_salary IS
        SELECT first_name || ' ' || last_name AS full_name, salary
        FROM employees e
        WHERE e.department_id = v_dept_id
        AND e.salary = (SELECT MAX(salary) FROM employees WHERE department_id = v_dept_id);
    
    no_employees_found EXCEPTION;
BEGIN
    OPEN c_max_salary;
    FETCH c_max_salary INTO v_emp_name, v_salary;
    
    IF c_max_salary%NOTFOUND THEN
        RAISE no_employees_found;
    END IF;
    
    DBMS_OUTPUT.PUT_LINE('Top employee: ' || v_emp_name || ' ($' || TO_CHAR(v_salary, '999,999.00') || ')');
    
    CLOSE c_max_salary;
EXCEPTION
    WHEN no_employees_found THEN
        DBMS_OUTPUT.PUT_LINE('No employee work for this department (' || v_dept_id || ')!');
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('An error occurred: ' || SQLERRM);
END;

ยังไม่ชัว
DECLARE
    v_dept_id NUMBER := 100; -- You can change this value to the department ID you want to check
    v_emp_id NUMBER;
    v_first_name VARCHAR2(50);
    v_last_name VARCHAR2(50);
    v_salary NUMBER;
    v_dept_name VARCHAR2(30);
    
    CURSOR c_max_salary IS
        SELECT e.employee_id, e.first_name, e.last_name, e.salary, d.department_name
        FROM employees e
        JOIN departments d ON e.department_id = d.department_id
        WHERE e.department_id = v_dept_id
        AND e.salary = (SELECT MAX(salary) FROM employees WHERE department_id = v_dept_id);
    
    no_employees_found EXCEPTION;
BEGIN
    OPEN c_max_salary;
    FETCH c_max_salary INTO v_emp_id, v_first_name, v_last_name, v_salary, v_dept_name;
    
    IF c_max_salary%NOTFOUND THEN
        RAISE no_employees_found;
    END IF;
    
    DBMS_OUTPUT.PUT_LINE('Department: ' || v_dept_name);
    DBMS_OUTPUT.PUT_LINE('Employee with highest salary:');
    DBMS_OUTPUT.PUT_LINE('Employee ID: ' || v_emp_id);
    DBMS_OUTPUT.PUT_LINE('Name: ' || v_first_name || ' ' || v_last_name);
    DBMS_OUTPUT.PUT_LINE('Salary: $' || v_salary);
    
    CLOSE c_max_salary;
EXCEPTION
    WHEN no_employees_found THEN
        DBMS_OUTPUT.PUT_LINE('Error: No employees found in department ' || v_dept_id);
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('An error occurred: ' || SQLERRM);
END;
